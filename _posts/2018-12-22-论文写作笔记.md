# 论文结构
1. 绪论
   1. 研究背景及意义
   2. 国内外研究现状
      1. 陆地生态系统碳循环模型及其对比
      2. 地理数据服务和地理模型服务
      3. 地理服务集成应用框架
      4. 研究现状分析与总结
   3. 研究内容、研究目标
   4. 研究方法和技术路线
2. 陆地生态系统碳循环及其模型和数据                          11
   1. 陆地生态系统碳循环
   2. 陆地生态系统碳循环模型
      1. 陆地生态系统碳循环模型及其分类
      2. IBIS, Biome-BGC, LPJ模型简介
   3. 陆地生态系统碳循环相关数据
      1. 气象数据集
      2. 土壤数据集
      3. 植被功能类型数据集
      4. 通量观测数据集
      5. MODIS GPP/NPP数据集
3. 开放式模型对比框架设计                                   18
   1. 陆地生态系统碳循环模型对比情景和业务分析归纳       4
      1. 对比情景分析和总结
      2. 对比业务抽象和归纳
   2. 基于服务的地理资源组件库                         4
      1. 模型服务资源库                            2
      2. 数据服务资源库                            1
      3. 单位量纲资源库                            2
      4. 对比服务资源库                            1
   3. 基于微服务的分布式网络架构设计                    6
      1. 微服务简介与应用                          2
      2. 服务治理                                 1
         1. 动态服务注册与发现          
         2. API网关         
      3. 微服务容器设计                            3
         1. 数据管理容器            
         2. 模型计算容器            
         3. 模型对比容器            
   4. 对比科学工作流引擎                               2
      1. 对比流程分析和归纳
      2. 对比自动化执行引擎
4. 开放式对比资源接入方法                                   20
   1. 开放式碳循环相关数据资源接入方法
   2. 开放式碳循环模型资源接入方法
   3. 开放式碳循环模型对比方法接入方法

胡迪：地理模型的服务化封装方法研究
    地理模型和模型服务
    模型服务描述
    描述文档的生成
    模型封装

乐松山：面向地理模型共享和集成的数据适配方法研究
    地理模型的数据规格及其结构化描述方法
    数据映射方法
    数据重构方法
    数据适配方案

v0.3: 题目：陆地生态系统碳循环模型开放式对比系统构建方法研究
- 陆地生态系统碳循环模型对比场景分析
  - 陆地生态系统碳循环模型及其特征分析
    - 陆地生态系统碳循环模型及其分类
    - 陆地生态系统碳循环模型的特点
    - IBIS, Biome-BGC, LPJ模型简介
  - 陆地生态系统碳循环数据资源及其特征分析
    - 气象数据集
    - 土壤数据集
    - 其他输入数据集
    - 通量观测数据集
  - 陆地生态系统碳循环模型对比方案分析和归纳
    - 基于实验协议的模型对比方案
    - 可迁移、复用与重现的模型对比方案
    - 模型对比方案总结
  - 本章小结
- 开放式地理模型对比框架
  - 基于组件的开放式模型对比框架
    - 面向对比的开放式地理资源库
    - 
  - 开放式地理模型资源接入方法
    - 地理模型资源运行特征分析
    - 地理模型资源描述方法
    - 地理模型资源的封装和服务发布
  - 开放式地理数据资源接入方法
    - 地理数据资源结构特征分析
    - 地理数据资源结构化描述方法
    - 地理数据资源的服务化封装
  - 本章小结
- 开放式地理模型对比方案研究
  - 面向对比的度量标准研究
    - 面向对比的度量标准及其描述方法
    - 面向度量标准的数据适配方法
  - 开放式地理模型对比方法库
    - 统计学对比方法
    - 可视化对比方法
  - 对比科学工作流引擎
    - 对比流程分析和归纳
    - 对比自动化执行引擎
  - 本章小结
- 原型系统和实验验证
  - 原型系统构建
    - 网络架构和系统功能模块设计
    - 陆地生态系统碳循环对比资源库
    - 开放式对比任务执行引擎
  - 实验案例
    - 模型资源和数据资源
    - 对比方案
    - 对比结果

v0.4：题目：陆地生态系统碳循环模型开放式对比系统构建方法研究
- 陆地生态系统碳循环模型对比场景分析
  - 陆地生态系统碳循环模型及其特征分析
    - 陆地生态系统碳循环模型及其分类
    - 陆地生态系统碳循环模型的特点
    - IBIS, Biome-BGC, LPJ模型简介
  - 陆地生态系统碳循环数据资源及其特征分析
    - 气象数据集
    - 土壤数据集
    - 其他输入数据集
    - 通量观测数据集
  - 陆地生态系统碳循环模型对比方案分析和归纳
    - 基于实验协议的模型对比方案
    - 可迁移、复用与重现的模型对比方案
    - 模型对比方案总结
  - 本章小结
- 陆地生态系统碳循环模型开放式对比框架
  - 开放式对比框架需求分析
  - 开放式对比流程分析和总结
  - 总体架构设计
  - 本章小结
- 陆地生态系统碳循环模型开放式对比方法研究
  - 开放式地理模型资源接入方法
    - 地理模型资源运行特征分析
    - 地理模型资源描述方法
    - 地理模型资源的封装和服务发布
  - 开放式地理数据资源接入方法
    - 地理数据资源结构特征分析
    - 地理数据资源结构化描述方法
    - 地理数据资源的服务化封装
  - 开放式对比方法
  - 本章小结

# 几个重点
- 没有科学问题，但是有现实需求，要把需求清晰、强烈的表达出来

# 问题
- 题目
- 第二章介绍模型和第一章研究现状部分重合
- 系统设计书

- 1.2 陆地碳的发展 发展到什么程度 模型的不确定性导致模型的应用效率
- 向开放式对比的方向上来
- 第二章 
  - 2.2 碳循环模型
  - 2.3 集中式的对比方案
- 第三章 和碳没关
  - 开放式对比所需要的模块、组件（6个库）
  - 流程分析、介绍（标准度量）      围绕着碳循环模型讨论
  - 工作流架构图
  - 工作流引擎
- 第四章 对比方法
  - 模型 资源接入
  - 数据资源（数据适配）
  - 对比方法
- 在全球尺度上这种站点的采样合不合理，具不具备代表性
- 不确定性分析：分析误差来源

# 研究内容
未来气候排放预测对比

CMIP 中的 out4MIP 和 obs4MIP 的接入
研究区域的详细设定

# 其他对比项目的实验
## CMIP3
CO2加倍敏感性实验：模式中co2含量的改变方式，在早期的研究工作中一般是首先在其含量正常的情况下，将模式积分到平衡态，作为控制试验；再将模式中的co2加倍，积分到新的平衡态，为敏感性试验，比较其与控制试验的差别。最近这些年来，人们开始采用将模式中的co2按一定时间比例逐渐增加，分析若干年后，co2含量达到倍增时的气候变化情况，被称为**瞬时气候试验**，这样与实际情况更一致。

超级集合方法（加权平均）：国内外对未来气候进行数值预测过程中包含了很大的不确定性，这主要可以归结为气候模式本身、温室气体排放量估算的不确定性、以及气候资料的不足等．然而，当前气候模式有能力给出比较科学的关于未来气候变化的模拟结果，多模式的集合预测结果也被证明更加可信．正是基于此，合成多个耦合模式的最新数值模拟预测结果。
超级集合方法是在对多个模式预报结果进行处理后，构建最优预报的方法，年等提出了超级集合预报的概念。在使用超级集合方法时，首先把选取的数据集按时间分为两个部分：即训练阶段和预报阶段。在训练期，使用多元线性回归方法计算回归权重系数，该系数只随空间变化而不随时间变化，利用模式权重系数来构建预报场。在超级集合的多元回归计算中使用变量的异常而非变量本身，因此，在构建超级集合预报场时，是用权重乘以相应模式的异常，公式为：


## CMIP5
- 长期气候试验 (碳排放)
  - 工业革命前控制试验(piControl)：是将温室气体、气溶胶、臭氧和太阳常数固定在1850年的基础上循环积分，在积分稳定以后取500 年，是历史试验、气候灵敏度等试验的参照试验，并为其提供初始场资料。该试验多用来分析无外强迫变化时的模式内部变率，与历史试验和其他强迫试验进行对比，可以研究外强迫的响应。
  - 历史试验
  - 未来情景试验：NPP对气候（温度、降水）变化和co2浓度升高的响应
  - 气候归因试验
  - 古气候试验
  - 气候灵敏度试验
- 碳循环气候试验 (CO2 浓度)
  - 工业革命前控制试验
  - 历史试验
  - 未来RCP8.5情景试验
  - 碳-气候反馈诊断试验
- 年代际预测试验

**历史模拟试验（长期数值模拟）**：历史试验（1850–2005 年）是对过去 150 年地球系统气候变化的模拟，其外强迫包括了人类活动（温室气体、土地利用和气溶胶）和自然影响（太阳和火山活动）
**21世纪预估试验（年代际预测试验）**：21 世纪预估试验（2006–2100 年）是以 RCP 情景为强迫，进行的不同情景下的气候变化预估
**高分辨率大气模式试验**

**敏感性分析**
随着碳循环过程模型的发展，其参数敏感性分析越来越重要。碳循环过程模型一般拥有大量的参数，而
对于一个特定的研究区域，其关键参数是有限的。参数敏感性分析常用于区分模型参数的重要性，以及评价
模型参数误差对模拟结果产生的影响，包括局部敏感性分析和全局敏感性分析［１１３］ 。局部敏感性分析计算简
单、易操作，但其没有考虑模型参数之间的相互作用对模拟结果的影响，同时其他参数的取值变化也有可能影
响该参数的敏感性分析结果。与局部敏感性分析相比，全局敏感性分析不仅能够检验单个参数对模型模拟结
果的影响程度，还能分析参数之间的相互作用对结果的总影响，但其计算较复杂、耗时。近年来，学者提出的
局部敏感性分析方法较多，而全局敏感性分析相对较少［１１４］ 。针对复杂的森林碳循环过程模拟研究，发展可
靠的全局敏感性分析方法是研究趋势之一。

**尺度效应**
观测尺度、模型尺度和地表过程尺度内部及其之间的不匹配，可能会对碳循环过程的模拟得出截然不同的结论

**不确定性分析**
- 碳循环机制存在的不确定性
- 模型模拟过程的不确定性
  - 模型参数的不确定性
  - 模型状态的不确定性
  - 边界条件的不确定性
- 观测数据的不确定性

**外强迫实验**
co2 倍增

# 实验
- [x] 调用 IBIS
- [x] 调用 Biome-BGC
- [x] 处理 Biome-BGC 数据，合并为 nc，添加 scale, offset
- [x] 处理 IBIS 数据
- [x] 修改对比脚本
- [x] 观测数据抽取
- [ ] 对观测站点按照植被功能类型（PFT）分类，在类内汇总统计对比结果，并在类间开展对比。分析植被功能类型对模型的影响
- [ ] 站点内年份总量的误差对比，单位（gC m-2 y-1）
- [ ] 统计指标：
  - [ ] RMSE：均方根误差
  - [ ] P值、r方
- [ ] 实验结果分析
  - [ ] 站点级和全球
  - [ ] 总体时空变化特征
  - [ ] 不同地理分析的GPP变化特征
  - [ ] 不同植被功能类型的GPP变化特征
  - [ ] 气候因素对GPP变化的影响
    - [ ] 相邻两年，温度升高/降低，GPP升高/降低四种情况。分析每种情况的占比
    - [ ] 降水。。。

# 地球/气候系统模式

# 碳循环模型分类
按照模拟区域分为：
    陆地生态系统
        森林生态系统
        草地生态系统
        农业生态系统
        湿地生态系统
        内陆水体生态系统
        
    海洋
    大气

按照植被功能类型（PFT）是否随时间变化分为：
    静态
    动态

按照过程：


按照机理：
    统计
        遥感统计模型
        气候统计模型
    过程
    统计、过程耦合模型


**题目中的类别：陆地生态系统植被生产力模型/模式**

对比要素: GPP, NPP, NEE, Respiration (再改模型的话直接把单位统一)

站点：不能平均，再修改
时间变化：
    按PFT分类，年总收支变化折线
    不分类，全球年收支变化曲线
空间分布：
    14（2000-2013）年平均值
        按纬度做折线图
    观测站点做成热力图


**几个重要任务：**
    - 所有站点重新运行
    - 论文初稿修改
    - GAIM 的研究，尤其是国外的文献

**关于实验细节：**
    - FLUXNET PFT 划分和三种模型相匹配
    - FLUXNET 观测站点经纬度和网格点的匹配：
      - 相同PFT，最靠近的网格点
      - 多个观测站点，选择观测数据最全的那个
    - 观测站点的筛选：IBIS、Biome-BGC、LPJ 三个 coef 都大于 0.5 的参加多站点对比评估
    - IBIS 的重新封装和运行：使用袁老师的版本，spinup可以设低点
    - 全球数据的准备和运行
    - 标准差网格图、变异系数网格图
    - 季节图不分南北半球，南半球按照南半球的月份算，最后汇总到一张图中
    - 季节图添加平均值折线和变异范围（10%-90%）
    - 全球网格点的散点图
    - 站点数据最好从面数据中提取，而不是使用匹配的网格点

# PFT 分类标准：
IGBP：
  - Evergreen
    - Needleleaf
    - Broadleaf
  - Deciduous
    - Needleleaf
    - Broadleaf
  - Mixed Forest
  - Shrubland
    - Open
    - Closed
  - Woody Savanna
  - Savanna
  - Grassland
  - Barren/Space Vegetation
  - Cropland/Natural Vegetation
  - Cropland
  - Urban and Built-up
  - Snow and Ice
  - Permanent Wetland

SAGA:
  - Evergreen
    - Tropical
    - Temperate Broadleaf
    - Temperate Needleleaf
    - Boreal
  - Deciduous
    - Tropical
    - Temperate
    - Boreal 
  - Mixed Forest
  - Shrubland
    - Open
    - Closed
  - Savanna
  - Grassland
  - Tundra
  - Desert
  - Polar Desert/Rock/Ice



- Needleleaf Evergreen
  - Temperate
  - Boreal
- Needleleaf Deciduous (Boreal)
- Broadleaf Evergreen
  - Tropical
  - Temperate
- Broadleaf Deciduous
  - Tropical
  - Temperate
  - Boreal
- Shrubland
  - Temperate Broadleaf Evergreen
  - Temperate Broadleaf Deciduous
  - Boreal Broadleaf Deciduous
- Grassland
  - C3 (cold)
  - C4 (Warm)
  - C3 arctic
- Cropland

