---
layout: post
tags: 
    - JavaScript
    - Promise
catalog: true
---

# 基本需求
## constructor

# 实现then方法
通过 state 判断执行 onFulfilled 还是 onRejected。

# 解决异步问题
在构造器中，如果 resolve 是通过异步返回的话，在执行 then 语句时，state 仍为 pending，所以可以通过将 onFulfilled 和 onRejected 先放到一个数组中，延迟到 resolve 时执行。

# 解决链式调用
先看例子，在 then 中的 onFulfilled 中可以有两种情况：return 普通的值；return 一个新的 promise
```js

```
所以就需要先判断一下 onFulfilled return 的值类型，如果是 promise 时，就将此 promise resolve 的值给 promise2，否则直接 resolve。这一过程中可能存在递归。

# 其他问题

# 其他成员方法
## resolve
## reject
## race
## all
## map

# 参考
[BAT前端经典面试问题：史上最最最详细的手写Promise教程](https://juejin.im/post/5b2f02cd5188252b937548ab#heading-1)<br>
[Promise/A+](https://promisesaplus.com/)<br>